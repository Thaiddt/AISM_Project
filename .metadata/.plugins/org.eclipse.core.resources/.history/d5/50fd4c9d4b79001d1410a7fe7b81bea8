package hust.soict.dsai.aims;

import java.util.Scanner;

import hust.soict.dsai.aims.book.Book;
import hust.soict.dsai.aims.cd.CompactDisc;
import hust.soict.dsai.aims.disc.DigitalVideoDisc;
import hust.soict.dsai.aims.media.Media;

public class Options {
	
	static Scanner sr = new Scanner(System.in);
	public static void RunApp() {
		int choose;
		try {
			do {
				Menu.showMenu();
				choose = sr.nextInt();
				sr.nextLine();
				switch (choose) {
				case 1:
					ViewStore();
					break;
				case 2:
					break;
				case 3:
					break;
				case 0:
					System.out.println("The application is close...");
					break;
				default:
					System.out.println("Your choose doesn't have!");
					System.out.println("Please choose again!");
					break;
				}
			} while(choose < 0 && choose > 3);
		} catch (Exception e) {
			System.out.println("Error");
		}
	}
	
	public static void ViewStore() {
		int choose;
		try {
			do {
				Aims.store.viewStore();
				Menu.storeMenu();
				choose = sr.nextInt();
				sr.nextLine();
				switch (choose) {
				case 1:
					MediaDetail();
					break;
				case 2:
					AddMediaToCart();
					break;
				case 3: 
					PlayMedia();
					break;
				case 4:
					Aims.cart.viewCart();
					ViewStore();
					break;
				case 0:
					RunApp();
					break;
				default:
					System.out.println("Your choose doesn't have");
					break;
				}
			} while (choose < 0 && choose > 4);
		} catch (Exception e) {
			System.out.println("Error");
		}
		
	}
	
	public static void MediaDetail() {
		String title;
		int i = 0;
		Media mediax = null;
		int choose;
		try {
			System.out.println("Please enter the title of the media: ");
			title = sr.nextLine();
			for (Media media : Aims.store.getItemInStore()) {
				if (title.compareTo(media.getTitle()) == 0) {
					System.out.println("\n-------------------------------------------------------------------------------------------------------------");
					System.out.println(media.toString());
					i++;
					mediax = media;
					break;
				}
			}
			if (i == 0) {
				System.out.println("Don't have this media\n");
				ViewStore();
				return;
			}
			do {
				Menu.mediaDetailsMenu();
				choose = sr.nextInt();
				sr.nextLine();
				switch (choose) {
				case 1:
					AddToCart(mediax);
					break;
				case 2:
					Play(mediax);
					break;
				case 0:
					ViewStore();
					break;
				default:
					System.out.println("Your choose doesn't have");
					break;
				}
			} while (choose < 0 && choose > 4);
		} catch (Exception e) {
			System.out.println("Error");
		}	
	}
	
	
	public static void Play(Media media) {
		if (media instanceof Book) {
			System.out.println("Book can't play!!!\n");
			return;
		}
		if (media instanceof DigitalVideoDisc) {
			((DigitalVideoDisc) media).play();
		}
		if (media instanceof CompactDisc) {
			((CompactDisc) media).play();
		}
		return;
	}
	
	public static void AddToCart(Media media) {
		if (media == null) {
			System.out.println("Can't add media !!! Don't see media\n");
		}else Aims.cart.addMedia(media);
	}
	
	public static void AddMediaToCart() {
		String title;
		int i;
		do {
			Aims.store.viewStore();
			System.out.println("Please enter the title of the media: ");
			title = sr.nextLine();
			i = 0;
			for (Media media : Aims.store.getItemInStore()) {
				if(title.compareTo(media.getTitle()) == 0) {
					i++;
					Aims.cart.addMedia(media);
					Aims.cart.getNumberDVD();
					break;
				}
			}
			if (i == 0) {
				System.out.println("Can't find this media.");
			}
		} while (i == 0);
		
	}
	
	public static void PlayMedia() {
		String title;
		int i = 0;
		do {
			System.out.println("Please enter the title of the media: ");
			title = sr.nextLine();
			for (Media media : Aims.store.getItemInStore()) {
				if(title.compareTo(media.getTitle()) == 0) {
					if (media instanceof CompactDisc) {
						((CompactDisc) media).play();
						return;
					}
					if (media instanceof DigitalVideoDisc) {
						((DigitalVideoDisc) media).play();
						return;
					}
					if (media instanceof Book) {
						System.out.println("Book can't play!!!\n");
						return;
					}
				}
			}
			if (i == 0) {
				System.out.println("Can't find this media.");
			}
		} while (i == 0);
	}
	
	public static void UpdateStore() {
		System.out.println("Do you want to add a media to or remove a media from the store ?");
		System.out.println("1. Add new media to store.");
		System.out.println("2. Remove media from store.");
		System.out.println("0. Back");
		System.out.printf("Your choose is (0-1-2): ");
		int choose;
		choose = sr.nextInt();
		sr.nextLine();
		switch (choose) {
		case 1:
			
			break;
		case 2:
			break;
		case 0:
			break;
		default:
			System.out.println("Your choose doesn't have");
			break;
		}
	}

}
